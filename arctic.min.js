(function(D){function s(a,b){return function(){return a.apply(b,arguments)}}function z(a){for(var b=a.length,c=[];b--;)c[b]=a[b];return c}function v(a,b,c){if(arc.ua.isAndroid2_1)return[a,b];var d=c*Math.PI/180,c=a*Math.cos(d)-b*Math.sin(d),a=a*Math.sin(d)+b*Math.cos(d);return[c,a]}function A(a,b,c,d,e){if(arc.ua.isAndroid2_1)return[a,b,c,d];var f=v(a,b,e),g=v(a+c,b,e),j=v(a,b+d,e),d=v(a+c,b+d,e),a=Math.min(f[0],g[0],j[0],d[0]),b=Math.min(f[1],g[1],j[1],d[1]),c=Math.max(f[0],g[0],j[0],d[0]),f=Math.max(f[1],
g[1],j[1],d[1]);return[a,b,c-a,f-b]}function B(a){return"rgb("+(a>>16)+", "+(a>>8&255)+", "+(a&255)+")"}function w(){return 90==window.orientation||-90==window.orientation?screen.height:screen.width}var E={trace:function(){try{if(1==arguments.length)console.log(arguments[0]);else{for(var a="",b=0;b<arguments.length;b++)0!=b&&(a+=","),a+=arguments[b];console.log(a)}}catch(c){}},bind:s,copyArray:z},o={};o.isiPhone=/iPhone/i.test(navigator.userAgent);o.isiPhone4=o.isiPhone&&2==window.devicePixelRatio;
o.isiPad=/iPad/i.test(navigator.userAgent);o.isiOS=o.isiPhone||o.isiPad;o.isiOS3=(o.isiPhone||o.isiPad)&&/OS\s3/.test(navigator.userAgent);o.isAndroid=/android/i.test(navigator.userAgent);o.isAndroid2_1=/android\s2\.1/i.test(navigator.userAgent);o.isMobile=o.isiOS||o.isAndroid;var l=function(){var a=function(){};return{create:function(){function b(){this.initialize.apply(this,arguments)}function c(a){a=a.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,
"").replace(/\s+/g,"").split(",");return 1==a.length&&!a[0]?[]:a}function d(a,b){var c=function(){var c=this,$super=void 0!==b?function(){return b.apply(c,arguments)}:void 0,d=z(arguments);d.unshift($super);return a.apply(c,d)};c.valueOf=s(a.valueOf,a);c.toString=s(a.toString,a);return c}var e="function"==typeof arguments[0]?arguments[0].prototype:{};if(!arguments[0])throw Error("define class");"function"==typeof arguments[0]&&(a.prototype=e,b.prototype=new a,Array.prototype.shift.apply(arguments));
var f=arguments[0],g;for(g in f){var j=f[g];if("function"==typeof j)if("$super"==c(j)[0])j=d(j,e[g]);else if("initialize"==g&&e.initialize)var n=j,j=function(){e.initialize.apply(this,arguments);n.apply(this,arguments)};b.prototype[g]=j}return b.prototype.constructor=b}}}(),i=l.create({type:null,target:null,initialize:function(a,b){this.type=a;for(var c in b)if(b.hasOwnProperty(c)&&!("type"==c||"target"==c))this[c]=b[c]}});i.PROGRESS="PROGRESS";i.COMPLETE="COMPLETE";i.ENTER_FRAME="ENTER_FRAME";i.ERROR=
"ERROR";i.TIMER="TIMER";i.TIMER_COMPLETE="TIMER_COMPLETE";i.TOUCH_START="TOUCH_START";i.TOUCH_MOVE="TOUCH_MOVE";i.TOUCH_END="TOUCH_END";var r=l.create({addEventListener:function(a,b){r.listenHash[a]||(r.listenHash[a]=[]);r.listenHash[a].push({target:this,callback:b})},removeEventListener:function(a,b){var c=r.listenHash[a];if(c){for(var d=0;d<c.length;d++){var e=c[d];e.target==this&&(b&&e.callback==b||!b)&&c.splice(d,1)}0==c.length&&delete r.listenHash[a]}},dispatchEvent:function(a,b){if(r.listenHash[a]){for(var c=
[],d=r.listenHash[a],e=0;e<d.length;e++)c[e]=d[e];d=c.length;for(e=0;e<d;e++){var f=c[e];if(f.target==this){var g=new i(a,b);g.target=this;f.callback.call(this,g)}}}}});r.listenHash={};var q=l.create({_startTime:0,_isCounting:!1,_elapsedTime:0,initialize:function(){},start:function(){this._isCounting=!0;this._startTime=q.time},stop:function(){this._isCounting=!1},reset:function(){this._isCounting=!0;this._startTime=q.time},getElapsed:function(){this._isCounting&&(this._elapsedTime=q.time-this._startTime);
return this._elapsedTime}});q.time=0;q.tick=function(){q.time=Date.now()};var x=l.create(r,{_timer:null,_currentCount:0,_repeatCount:0,_delay:0,_isRunning:!1,_updateFunc:null,initialize:function(a,b){this._timer=new q;this._delay=a;this._repeatCount=b?b:0},reset:function(){this._currentCount=0;this.stop()},start:function(){this._timer.start();this._updateFunc&&x.system.removeEventListener(i.ENTER_FRAME,this._updateFunc);this._updateFunc=s(this._update,this);x.system.addEventListener(i.ENTER_FRAME,
this._updateFunc)},_update:function(){this._timer.getElapsed()>=this._delay&&(this._currentCount++,this._timer.reset(),this.dispatchEvent(i.TIMER),this._repeatCount&&this._currentCount>=this._repeatCount&&(this.reset(),this.dispatchEvent(i.TIMER_COMPLETE)))},stop:function(){this._timer.stop();this._updateFunc&&(x.system.removeEventListener(i.ENTER_FRAME,this._updateFunc),this._updateFunc=null)},setDelay:function(a){this._delay=a},getDelay:function(){return this._delay},setRepeatCount:function(a){this._repeatCount=
a},getRepeatCount:function(){return this._repeatCount}});x.system=null;var F=l.create(r,{_method:"GET",_params:null,_url:null,_request:null,_jsonResponse:null,_loadedCallBack:null,initialize:function(){this._request=new XMLHttpRequest;this._loadedCallBack=s(this._loaded,this)},load:function(a,b){this._url=a;this._params=b;this._request.open(this._method,this._url,!0);this._request.addEventListener("readystatechange",this._loadedCallBack,!1);this._request.send(this._params)},_loaded:function(){if(4==
this._request.readyState)if(200==this._request.status||0==this._request.status)this.dispatchEvent(i.COMPLETE);else throw this.dispatchEvent(i.ERROR),Error("Load Error : "+this._url);},unload:function(){this._request.abort();this._jsonResponse=null;this._request.removeEventListener("readystatechange",this._loadedCallBack,!1)},setMethod:function(a){this._method=a},getResponseText:function(){return this._request.responseText},getResponseJSON:function(){this._jsonResponse||(this._jsonResponse=JSON.parse(this._request.responseText));
return this._jsonResponse},getURL:function(){return this._url}}),h={};h.Image=l.create(r,{_data:null,_path:null,_width:null,_height:null,_frameWidth:null,_lx:null,_ly:null,_lwidth:null,_lheight:null,_hasLocalPos:!1,initialize:function(a,b){if(!a&&a.constructor!=HTMLImageElement)throw Error("set HTMLImageElement");this._data=a;this._path=a.src;b&&4==b.length?(this._lx=b[0],this._ly=b[1],this._lwidth=b[2],this._lheight=b[3],this._hasLocalPos=!0,this._width=this._lwidth,this._height=this._lheight):(this._width=
this._data.width,this._height=this._data.height)},duplicate:function(){var a=new h.Image;a._setData(this._data);return a},changeScale:function(a,b){return this.changeSize(this._width*a,this._height*b)},changeSize:function(a,b){var c=document.createElement("canvas"),d=0,e=0,f=this._width,g=this._height;c.width=a;c.height=b;this._hasLocalPos&&(d=this._lx,e=this._ly,f=this._lwidth,g=this._lheight,this._hasLocalPos=!1);if(arc.ua.isAndroid2_1&&320!=w())var j=320/w(),d=~~(d*j),e=~~(e*j),f=~~(f*j),g=~~(g*
j),a=~~(a*j),b=~~(b*j);c.getContext("2d").drawImage(this._data,d,e,f,g,0,0,a,b);this._data=c;this._width=this._data.width;this._height=this._data.height;return this},changeColor:function(a,b){var c=this._data.width,d=this._data.height,e=document.createElement("canvas");e.width=c;e.height=d;var f=e.getContext("2d");f.drawImage(this._data,0,0);for(var g=f.getImageData(0,0,c,d),j=f.createImageData(c,d),n=a>>16,h=a>>8&255,p=a&255,i=0;i<d;i++)for(var k=0;k<c;k++){var m=4*k+4*i*c;j.data[m]=(n-g.data[m])*
b+g.data[m];j.data[m+1]=(p-g.data[m+1])*b+g.data[m+1];j.data[m+2]=(h-g.data[m+2])*b+g.data[m+2];j.data[m+3]=g.data[m+3]}f.putImageData(j,0,0);this._data=e;return this},draw:function(a,b,c){if(this._hasLocalPos)this.drawCrop(this._lx,this._ly,this._lwidth,this._lheight,a,b,this._width,this._height,c);else{if(arc.ua.isAndroid2_1&&320!=w())var d=320/w(),a=a*d,b=b*d;a=~~a;b=~~b;d=h.Image.context;d.save();d.translate(a,b);0!=c%360&&d.rotate(c);d.drawImage(this._data,0,0);d.restore()}},drawSize:function(a,
b,c,d,e){if(this._hasLocalPos)this.drawCrop(this._lx,this._ly,this._lwidth,this._lheight,a,b,c,d,e);else{var f=c/this._width,g=d/this._height,j=h.Image.context;arc.ua.isAndroid2_1?(e=320/w(),j.drawImage(this._data,~~(a*e),~~(b*e),~~(c*e),~~(d*e))):(a=~~a,b=~~b,j.save(),j.translate(a,b),0!=e%360&&j.rotate(e*Math.PI/180),(1!=f||1!=g)&&j.scale(f,g),j.drawImage(this._data,0,0,this._width,this._height),j.restore())}},drawCrop:function(a,b,c,d,e,f,g,j,n){this._hasLocalPos&&this._frameWidth&&(a+=this._lx,
b+=this._ly);var i=this._frameWidth?this._frameWidth:this._width,p=g/i,u=j/this._height,k=h.Image.context;arc.ua.isAndroid2_1?(n=320/w(),this._data.constructor!=HTMLCanvasElement&&(a=~~(a*n),b=~~(b*n),c=~~(c*n),d=~~(d*n)),k.drawImage(this._data,a,b,c,d,~~(e*n),~~(f*n),~~(g*n),~~(j*n))):(a=~~a,b=~~b,c=~~c,d=~~d,e=~~e,f=~~f,k.save(),k.translate(e,f),0!=n%360&&k.rotate(n*Math.PI/180),(1!=p||1!=u)&&k.scale(p,u),k.drawImage(this._data,a,b,c,d,0,0,i,this._height),k.restore())},setFrameWidth:function(a){this._frameWidth=
a},getFrameWidth:function(){return this._frameWidth},getWidth:function(){return this._width},getHeight:function(){return this._height},getPath:function(){return this._path}});h.Image.context=null;h.DisplayObject=l.create(r,{_data:null,_parent:null,_x:0,_y:0,_width:null,_height:null,_visible:!0,_scaleX:1,_scaleY:1,_alpha:1,_rotation:0,_alignX:0,_alignY:0,_screenRect:[],initialize:function(a){a&&(this._data=a,this._width=this._data.getWidth(),this._height=this._data.getHeight(),this._screenRect=[0,
0,this._width,this._height])},localToGlobal:function(a,b){for(var c=this,d=a,e=b,f=0,g=0;c;)d=v(d,e,c.getRotation()),f+=d[0],g+=d[1],d=c.getX(),e=c.getY(),c=c.getParent();return[f,g]},globalToLocal:function(a,b){for(var c=[],d=this,e=a,f=b;d;)c.unshift(d),d=d.getParent();for(d=0;d<c.length;d++)var g=c[d],e=e-g.getX(),f=f-g.getY(),e=v(e,f,-1*g.getRotation()),f=e[1],e=e[0];return[e,f]},hitTestObject:function(){},draw:function(){},setX:function(a){this._x=a;this._updateScreenRect()},getX:function(){return this._x},
setY:function(a){this._y=a;this._updateScreenRect()},getY:function(){return this._y},setWidth:function(a){a||(a=0);this._width=a;this._data&&(this._scaleX=this._width/this._data.getWidth());this._updateScreenRect()},getWidth:function(){return this._width},setHeight:function(a){a||(a=0);this._height=a;this._data&&(this._scaleY=this._height/this._data.getHeight());this._updateScreenRect()},getHeight:function(){return this._height},setScaleX:function(a){a||(a=0);this._scaleX=a;this._width=this._data.getWidth()*
this._scaleX;this._updateScreenRect()},getScaleX:function(){return this._scaleX},setScaleY:function(a){a||(a=0);this._scaleY=a;this._height=this._data.getHeight()*this._scaleY;this._updateScreenRect()},getScaleY:function(){return this._scaleY},setVisible:function(a){this._visible=a},getVisible:function(){return this._visible},getParent:function(){return this._parent},setAlpha:function(a){a||(a=0);this._alpha=a},getAlpha:function(){return this._alpha},setRotation:function(a){a||(a=0);this._rotation=
a},getRotation:function(){return this._rotation},getAlignX:function(){return this._alignX},getAlignY:function(){return this._alignY},_updateScreenRect:function(){this._screenRect=A(this._x+this._alignX*this._scaleX,this._y+this._alignY*this._scaleY,this._width,this._height,this._rotation)}});h.DisplayObjectContainer=l.create(h.DisplayObject,{_displayArr:null,_originWidth:0,_originHeight:0,_maskObj:null,initialize:function($super){$super(null);this._displayArr=[];this._minX=this._maxX=this._minY=this._maxY=
0},addChild:function(a){for(var b=this._displayArr.length,c=0;c<b;c++)if(this._displayArr[c]==a)return;this._displayArr.push(a);a._parent=this;this._updateSize()},addChildAt:function(a,b){this._displayArr.splice(b,0,a);a._parent=this;this._updateSize()},removeChild:function(a){for(var b=this._displayArr.length,c=0;c<b;c++)if(this._displayArr[c]==a){this._displayArr.splice(c,1);a._parent=null;a._removeAllChild&&a._removeAllChild();break}this._updateSize()},_removeAllChild:function(){var a,b,c;a=0;
for(b=this._displayArr.length;a<b;a++)c=this._displayArr[a],c._parent=null,c._removeAllChild&&c._removeAllChild();this._displayArr=[]},contains:function(a){for(var b=this._displayArr.length,c=0;c<b;c++)if(this._displayArr[c]==a)return!0;return!1},setChildIndex:function(a,b){for(var c=0,d=this._displayArr.length;c<d;c++)this._displayArr[c]==a&&(this._displayArr.splice(c,1),this._displayArr.splice(b,0,a))},draw:function(a,b,c,d,e,f){if(this.getVisible()){for(var a=a|0,b=b|0,c=!isNaN(c)?c:1,d=!isNaN(d)?
d:1,e=!isNaN(e)?e:1,c=c*this._scaleX,d=d*this._scaleY,e=e*this._alpha,f=(f?f:0)+this._rotation,g=h.Image.context,j=z(this._displayArr),n=j.length,i=0;i<n;i++){var p=j[i],u=p.getX()*c,k=p.getY()*d;if(0!=f%360)var m=v(u,k,f),u=m[0],k=m[1];var m=p.getAlignX()*c*p.getScaleX(),l=p.getAlignY()*d*p.getScaleY(),m=v(m,l,p.getRotation()+f),u=u+(m[0]+a),k=k+(m[1]+b);p.getVisible()&&(this._maskObj&&(g.save(),g.beginPath(),g.rect(this._maskObj.x*c+a,this._maskObj.y*d+b,this._maskObj.width*c,this._maskObj.height*
d),g.closePath(),g.clip()),p.draw(u,k,c,d,e,f),this._maskObj&&g.restore())}this._updateSize()}},_updateSize:function(){for(var a=0,b=0,c=0,d=0,e=this._displayArr.length,f=0;f<e;f++){var g=this._displayArr[f],j=g._screenRect[0],h=g._screenRect[1],i=g._screenRect[0]+g._screenRect[2],g=g._screenRect[1]+g._screenRect[3];0==f&&(a=j,b=h,c=i,d=g);j<a&&(a=j);i>c&&(c=i);h<b&&(b=h);g>d&&(d=g)}this._originWidth=c-a;this._originHeight=d-b;this._width=this._originWidth*this._scaleX;this._height=this._originHeight*
this._scaleY;this._screenRect=A(a*this._scaleX+this._x,b*this._scaleY+this._y,this._width,this._height,this._rotation)},setWidth:function(a){this._width=a;this._scaleX=this._width/this._originWidth},setHeight:function(a){this._height=a;this._scaleY=this._height/this._originHeight},setScaleX:function(a){this._scaleX=a;this._width=this._originWidth*this._scaleX},setScaleY:function(a){this._scaleY=a;this._height=this._originHeight*this._scaleY},setMask:function(a,b,c,d){this._maskObj={x:a,y:b,width:c,
height:d}},clearMask:function(){this._maskObj=null},_updateScreenRect:function(){this._updateSize()}});h.Align={TOP:"TOP",TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",CENTER:"CENTER",LEFT:"LEFT",RIGHT:"RIGHT",BOTTOM:"BOTTOM",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"};h.Shape=l.create(h.DisplayObject,{_funcStack:null,_minX:0,_maxX:0,_minY:0,_maxY:0,_firstFlg:!0,_willBeFilled:!1,_willBeStroked:!1,initialize:function(){this._funcStack=[]},beginFill:function(a,b){var c=this;this._funcStack.push(function(d,
e,f,g,j){c._willBeFilled=!0;d=h.Image.context;d.fillStyle=B(a);d.globalAlpha=b*j})},endFill:function(){var a=this;this._funcStack.push(function(){a._willBeFilled=!1})},beginStroke:function(a,b,c){var d=this;c||(c=1);this._funcStack.push(function(e,f,g,j,n){d._willBeStroked=!0;e=h.Image.context;e.lineWidth=a;e.strokeStyle=B(b);e.globalAlpha=c*n})},endStroke:function(){var a=this;this._funcStack.push(function(){a._willBeStroked=!1})},moveTo:function(a,b){this._funcStack.push(function(c,d,e,f){h.Image.context.moveTo((a+
c)/e,(b+d)/f)})},lineTo:function(a,b){var c=this;this._funcStack.push(function(d,e,f,g){var j=h.Image.context;j.lineTo((a+d)/f,(b+e)/g);c._willBeStroked&&j.stroke()})},_updateSize:function(a,b,c,d){this._firstFlg&&(this._firstFlg=!1,this._minX=a,this._maxX=a+c,this._minY=b,this._maxY=b+d);a<this._minX&&(this._minX=a);a+c>this._maxX&&(this._maxX=a+c);b<this._minY&&(this._minY=b);b+d>this._maxY&&(this._maxY=b+d);this._originWidth=this._maxX-this._minX;this._originHeight=this._maxY-this._minY;this._width=
this._originWidth*this._scaleX;this._height=this._originHeight*this._scaleY;this._updateScreenRect()},drawRect:function(a,b,c,d){this._updateSize(a,b,c,d);var e=this;this._funcStack.push(function(f,g,j,n){var i=h.Image.context;i.beginPath();i.rect((a+f)/j,(b+g)/n,c,d);e._willBeFilled&&i.fill();e._willBeStroked&&i.stroke()})},drawCircle:function(a,b,c){this._updateSize(a-c,b-c,2*c,2*c);var d=this;this._funcStack.push(function(e,f,g,j){var i=h.Image.context;i.beginPath();i.arc((a+e)/g,(b+f)/j,c,0,360,
!1);d._willBeFilled&&i.fill();d._willBeStroked&&i.stroke()})},draw:function(a,b,c,d,e,f){var a=a|0,b=b|0,c=!isNaN(c)?c:1,d=!isNaN(d)?d:1,e=!isNaN(e)?e:1,c=c*this._scaleX,d=d*this._scaleY,e=e*this._alpha,f=(f?f:0)+this._rotation,g=this._funcStack.length,j=h.Image.context;j.save();j.scale(c,d);for(var i=0;i<g;i++)this._funcStack[i].call(this,a,b,c,d,e,f);j.restore()},setWidth:function(a){this._width=a;this._scaleX=this._width/this._originWidth;this._updateScreenRect()},getWidth:function(){return this._width*
this._scaleX},setHeight:function(a){this._height=a;this._scaleY=this._height/this._originHeight;this._updateScreenRect()},getHeight:function(){return this._height*this._scaleY},setScaleX:function(a){this._scaleX=a;this._width=this._originWidth*this._scaleX;this._updateScreenRect()},setScaleY:function(a){this._scaleY=a;this._height=this._originHeight*this._scaleY;this._updateScreenRect()},_updateScreenRect:function(){this._screenRect=A(this._x+this._minX*this._scaleX,this._y+this._minY*this._scaleY,
this._width,this._height,this._rotation)}});h.ImageContainer=l.create(h.DisplayObject,{_align:h.Align.TOP_LEFT,_alignX:0,_alignY:0,initialize:function(){},setAlign:function(a){var b=this._data.getFrameWidth()?this._data.getFrameWidth():this._data.getWidth();switch(a){case h.Align.TOP:this._alignX=-1*b/2;this._alignY=0;break;case h.Align.TOP_LEFT:this._alignY=this._alignX=0;break;case h.Align.TOP_RIGHT:this._alignX=-1*b;this._alignY=0;break;case h.Align.CENTER:this._alignX=-1*b/2;this._alignY=-1*this._data.getHeight()/
2;break;case h.Align.LEFT:this._alignX=0;this._alignY=-1*this._data.getHeight()/2;break;case h.Align.RIGHT:this._alignX=-1*b;this._alignY=-1*this._data.getHeight()/2;break;case h.Align.BOTTOM:this._alignX=-1*b/2;this._alignY=-1*this._data.getHeight();break;case h.Align.BOTTOM_LEFT:this._alignX=0;this._alignY=-1*this._data.getHeight();break;case h.Align.BOTTOM_RIGHT:this._alignX=-1*b;this._alignY=-1*this._data.getHeight();break;default:throw Error("Specify align");}this._align=a},getAlign:function(){return this._align}});
h.Sprite=l.create(h.ImageContainer,{initialize:function(){},draw:function(a,b,c,d,e,f){var a=a|0,b=b|0,c=!isNaN(c)?c:1,d=!isNaN(d)?d:1,e=!isNaN(e)?e:1,f=this._rotation+(f?f:0),g=h.Image.context;g.globalAlpha=this._alpha*e;this._data.drawSize(a,b,this._width*c,this._height*d,f);g.globalAlpha=1}});h.MovieClip=l.create(h.DisplayObjectContainer,{_shouldLoop:!1,_fps:0,_timer:null,_currentFrame:0,_isPlaying:!1,_isShowed:!1,_timelineArr:null,_totalFrame:0,_shouldAutoPlay:!1,initialize:function(a,b,c){this._fps=
a;this._shouldLoop=b;this._timer=new q;this._currentFrame=1;this._timelineArr=[];this._totalFrame=0;this._shouldAutoPlay=void 0==c?!0:c},draw:function($super,b,c,d,e,f,g){!this._isShowed&&this._shouldAutoPlay&&(this._isShowed=!0,this.play());this._isPlaying&&this._update();$super(b,c,d,e,f,g)},_update:function(){var a=this._timer.getElapsed();a>=1E3/this._fps&&(this._step(),a=this._timer.getElapsed());for(var b=0;b<this._timelineArr.length;b++)this._timelineArr[b].update(this._currentFrame,a)},_step:function(){this._timer.reset();
this._currentFrame++;this._executeKeyFrame(this._currentFrame);this._currentFrame==this._totalFrame&&(this._shouldLoop?this._currentFrame=0:this.stop())},_executeKeyFrame:function(a){for(var b,c,d=0,e=this._timelineArr.length;d<e;d++)b=this._timelineArr[d],c=b.getTarget(),a==b.getFirstFrame()&&c.gotoAndPlay&&c.gotoAndPlay(1),b.executeKeyFrame(a)},removeChild:function($super,b){$super(b);this._isPlaying=!1;this._timer.stop();for(var c=0,d=this._timelineArr.length;c<d;c++)if(this._timelineArr[c].getTarget()===
b){this._timelineArr.splice(c,1);break}},_setTimeline:function(a,b){timeline=new t.Timeline(a,b,this._fps);this._timelineArr.push(timeline);totalFrame=timeline.getTotalFrames();this._totalFrame<totalFrame&&(this._totalFrame=totalFrame)},addChild:function($super,b,c){$super(b);c&&this._setTimeline(b,c)},addChildAt:function($super,b,c,d){$super(b,c);d&&this._setTimeline(b,d)},play:function(){this._isPlaying=!0;this._timer.start();this._executeKeyFrame(this._currentFrame)},stop:function(){this._isPlaying=
!1;this._timer.stop()},gotoAndPlay:function(a){if(1>a||a>this._totalFrame)throw Error("Invalid frame index");this._currentFrame=a;this.play()},gotoAndStop:function(a){if(1>a||a>this._totalFrame)throw Error("Invalid frame index");this._currentFrame=a;this.stop()}});h.JSONMovieClip=l.create(h.MovieClip,{initialize:function($super,b){function c(b,g){var h,k,n,l,y;k=d(b);if(!k)throw Error("invalid animation");if("data"==k.type)return k.pos?new e(arc._system.getImage(k.data,k.pos)):new e(arc._system.getImage(k.data));
g||(g=new f(i,k.loop));h=0;for(n=k.timelines.length;h<n;h++)l=k.timelines[h],y=c(l.target),y.constructor===e&&l.align&&y.setAlign(l.align),g.addChildAt(y,0,l.keyframes);return g}function d(b){var c,d,e;c=0;for(d=g.length;c<d&&!(e=g[c],e.id==b);c++);return e}var e=arc.display.Sprite,f=arc.display.MovieClip,g=b.lib,i=b.fps,h=d(b.main);$super(i);this._shouldLoop=h.loop;c(b.main,this)}});h.SheetMovieClip=l.create(h.ImageContainer,{_currentFrame:1,_totalFrame:1,_frameWidth:0,_frameTime:0,_isPlaying:!1,
_timer:null,_shouldLoop:!1,_shouldHide:!1,initialize:function(a,b,c,d,e){this._timer=new q;this._frameWidth=b;this._totalFrame=Math.floor(this._data.getWidth()/b);this._width=b;this._frameTime=1E3/c;this._shouldLoop=d;this._shouldHide=e;this._data.setFrameWidth(this._frameWidth);this._shouldHide&&(this._visible=!1);this.stop()},play:function(a){this._isPlaying=!0;void 0!=a&&(this._shouldLoop=a);this._shouldHide&&!this._visible&&(this._visible=!0);this._timer.start()},stop:function(){this._isPlaying=
!1;this._timer.stop();this._shouldHide&&(this._visible=!1)},gotoAndPlay:function(a){if(1>a||a>this._totalFrame)throw Error("Invalid frame index");this._currentFrame=a;this.play()},gotoAndStop:function(a){if(1>a||a>this._totalFrame)throw Error("Invalid frame index");this._currentFrame=a;this.stop()},draw:function(a,b,c,d,e,f){a|=0;b|=0;c=!isNaN(c)?c:1;d=!isNaN(d)?d:1;isNaN(e);f=f?f:0;this._visible&&(this._isPlaying&&this._timer.getElapsed()>=this._frameTime&&(this._currentFrame++,this._timer.reset(),
this._currentFrame>this._totalFrame&&(this._shouldLoop?this._currentFrame%=this._totalFrame:(this._currentFrame=this._totalFrame,this.stop(),this.dispatchEvent(i.COMPLETE)))),e=this._rotation+f,f=h.Image.context,f.globalAlpha=this._alpha,this._data.drawCrop((this._currentFrame-1)*this._frameWidth,0,this._frameWidth,this._data.getHeight(),a,b,this._width*c,this._height*d,e),f.globalAlpha=1)},setWidth:function(a){this._width=a;this._scaleX=this._width/this._frameWidth},setScaleX:function(a){this._scaleX=
a;this._width=this._frameWidth*this._scaleX}});h.SequenceMovieClip=l.create(h.DisplayObjectContainer,{_spriteArr:null,_frameTime:0,_shouldLoop:!1,_shouldHide:!1,_isPlaying:!1,_totalFrame:0,_currentIndex:0,_timer:null,initialize:function(a,b,c,d){var e=0,f=a.length;this._spriteArr=[];this._frameTime=b;this._shouldLoop=c;this._shouldHide=d;this._totalFrame=a.length;this._timer=new q;for(e=0;e<f;e++)b=new h.Sprite(a[e]),b.setVisible(!1),this._spriteArr.push(b),this.addChild(b);d&&(this._visible=!1)},
draw:function($super,b,c,d,e,f,g){$super(b,c,d,e,f,g);b=this._spriteArr.length;this._isPlaying&&(c=Math.floor(this._timer.getElapsed()/this._frameTime),c>this._totalFrame-1&&(this._shouldLoop?c%=this._totalFrame:(c=this._totalFrame,this.stop(),this.dispatchEvent(i.COMPLETE))),this._currentFrame=c);for(c=0;c<b;c++)d=this._spriteArr[c],c==this._currentFrame?d.setVisible(!0):d.setVisible(!1)},play:function(a){this._isPlaying=!0;a&&(this._shouldLoop=a);this._shouldHide&&!this._visible&&(this._visible=
!0);this._timer.start()},stop:function(){this._isPlaying=!1;this._timer.stop();this._shouldHide&&(this._visible=!1)},gotoAndPlay:function(a){if(1>a||a>this._totalFrame)throw Error("Invalid frame index");this._currentFrame=a;this.play()},gotoAndStop:function(a){if(1>a||a>this._totalFrame)throw Error("Invalid frame index");this._currentFrame=a;this.stop()}});h.TextField=l.create(h.DisplayObject,{_font:null,_family:"sans-serif",_textArr:null,_color:0,_align:"left",_baseline:"top",_size:10,initialize:function(){if(o.isiOS3)throw Error("Your can't use TextField in iOS3");
this._font=this._size+"px "+this._family;this._textArr=[]},draw:function(a,b,c,d,e){a|=0;b|=0;isNaN(c);isNaN(d);e=!isNaN(e)?e:1;c=h.Image.context;c.globalAlpha=this._alpha*e;c.save();c.fillStyle=B(this._color);c.textBaseline="top";c.font=this._font;c.textAlign=this._align;c.textBaseline=this._baseline;e=0;for(d=this._textArr.length;e<d;e++)c.fillText(this._textArr[e],a,b),b+=this._size;c.restore();c.globalAlpha=1},setAlign:function(a){switch(a){case h.Align.TOP:this._align="center";this._baseline=
"top";break;case h.Align.TOP_LEFT:this._align="left";this._baseline="top";break;case h.Align.TOP_RIGHT:this._align="right";this._baseline="top";break;case h.Align.CENTER:this._align="center";this._baseline="middle";break;case h.Align.LEFT:this._align="left";this._baseline="middle";break;case h.Align.RIGHT:this._align="right";this._baseline="middle";break;case h.Align.BOTTOM:this._align="center";this._baseline="bottom";break;case h.Align.BOTTOM_LEFT:this._align="left";this._baseline="bottom";break;
case h.Align.BOTTOM_RIGHT:this._align="right";this._baseline="bottom";break;default:throw Error("Specify align");}},setText:function(a){a instanceof String||(a=""+a);this._textArr=a.split("\n");this._width&&this._adjustWidth()},_adjustWidth:function(){var a=h.Image.context;a.font=this._font;for(var b=0;b<this._textArr.length;b++){var c=this._textArr[b],d=a.measureText(c);if(!(d.width<=this._width))for(var e=0,f=c.length;e<f;e++)if(d=c.substr(0,e+1),d=a.measureText(d),d.width>this._width){this._textArr[b]=
c.substr(0,e);this._textArr.splice(b+1,0,c.substr(e));break}}},setFont:function(a,b,c){this._family=a;this._size=b;this._font=b+"px "+a;c&&(this._font="bold "+this._font);this._textArr.length&&this._width&&this._adjustWidth()},setColor:function(a){this._color=a}});var t={};t.Animation=l.create(r,{_timer:null,_target:null,_system:null,_animObjArr:null,_shouldReplay:!1,_isPlaying:!1,_currentIndex:0,_currentAnim:null,_currentTransFunc:null,_firstParams:null,_currentDuration:null,_updateFunc:null,_HALF_PI:Math.PI/
2,initialize:function(a){if(!a)throw Error("Specify target");if(2>arguments.length)throw Error("Specify Animaiton Objects");this._target=a;this._timer=new q;this._animObjArr=[];for(var b=1;b<arguments.length;b++)this._animObjArr.push(arguments[b])},play:function(a){if(!this._isPlaying){var b=t.Animation.system;this._isPlaying=!0;this._shouldReplay=a;this._timer.start();this._currentIndex=-1;this._changeAnim()&&(this._updateFunc&&b.removeEventListener(i.ENTER_FRAME,this._updateFunc),this._updateFunc=
s(this._update,this),b.addEventListener(i.ENTER_FRAME,this._updateFunc))}},stop:function(){if(this._isPlaying){var a=t.Animation.system;this._isPlaying=!1;this._updateFunc&&(a.removeEventListener(i.ENTER_FRAME,this._updateFunc),this._updateFunc=null);this.dispatchEvent(i.COMPLETE)}},_changeAnim:function(){this._currentIndex++;if(this._currentIndex>=this._animObjArr.length)if(this._shouldReplay)this._currentIndex=0;else return this.stop(),!1;this._timer.reset();var a=this._animObjArr[this._currentIndex];
this._currentAnim={};this._firstParams={};for(var b in a)"time"==b||"transition"==b||(this._currentAnim[b]=a[b],this._firstParams[b]=this._getProperty(this._target,b));this._currentDuration=void 0==a.time?1E3:a.time;this._currentTransFunc=t.Transition.getTransFunc(a.transition);return!0},_getProperty:function(a,b){b.match(/^([a-z])(.*)/);var c="get"+RegExp.$1.toUpperCase()+RegExp.$2;if(a[c])return a[c]()},_setProperty:function(a,b,c){b.match(/^([a-z])(.*)/);b="set"+RegExp.$1.toUpperCase()+RegExp.$2;
if(a[b])a[b](c)},_update:function(){var a=this._timer.getElapsed(),b=this._currentTransFunc(a/this._currentDuration);if(a>=this._currentDuration){for(var c in this._currentAnim)this._setProperty(this._target,c,this._currentAnim[c]);this._changeAnim()&&this._update()}else for(c in this._currentAnim)a=(this._currentAnim[c]-this._firstParams[c])*b+this._firstParams[c],"visible"==c&&(a=this._firstParams[c]),this._setProperty(this._target,c,a)},isPlaying:function(){return this._isPlaying}});t.Animation.system=
null;(function(a){function b(a){return a}function c(a){return 1-Math.cos(a*o)}function d(a){return 1-c(1-a)}function e(a){return 1-Math.sqrt(1-a*a)}function f(a){return 1-e(1-a)}function g(a){return 0.5>a?0.5*e(2*a):1-0.5*e(2-2*a)}function h(a){return a*a*a}function i(a){return 1-h(1-a)}function l(a){return 0.5>a?0.5*h(2*a):1-0.5*h(2-2*a)}function p(a){return 1-u(1-a)}function u(a){var b=1-a;return 1-Math.pow(b,8)+Math.sin(6*(a*a)*Math.PI)*b*b}function k(a){return 0.5>a?0.5*p(2*a):1-0.5*p(2-2*a)}
var m={SINE_IN:"SINE_IN",SINE_OUT:"SINE_OUT",SINE_INOUT:"SINE_INOUT",LINEAR:"LINEAR",CIRC_IN:"CIRC_IN",CIRC_OUT:"CIRC_OUT",CIRC_INOUT:"CIRC_INOUT",CUBIC_IN:"CUBIC_IN",CUBIC_OUT:"CUBIC_OUT",CUBIC_INOUT:"CIRC_INOUT",ELASTIC_IN:"ELASTIC_IN",ELASTIC_OUT:"ELASTIC_OUT",ELASTIC_INOUT:"ELASTIC_INOUT",getTransFunc:function(a){switch(a){case m.LINEAR:return b;case m.SINE_IN:return c;case m.SINE_OUT:return d;case m.SINE_INOUT:return getSinInOut;case m.CIRC_IN:return e;case m.CIRC_OUT:return f;case m.CIRC_INOUT:return g;
case m.CUBIC_IN:return h;case m.CUBIC_OUT:return i;case m.CUBIC_INOUT:return l;case m.ELASTIC_IN:return p;case m.ELASTIC_OUT:return u;case m.ELASTIC_INOUT:return k;default:return b}}},o=Math.PI/2;a.Transition=m})(t);t.Timeline=l.create({_target:null,_keyFrameObj:null,_totalFrame:0,_fps:0,_baseFrame:null,_firstFrame:0,initialize:function(a,b,c){this._target=a;this._keyFrameObj=b;c&&(this._fps=c);for(var d in this._keyFrameObj){a=b[d];c=parseInt(d,10);if(0==this._firstFrame||this._firstFrame>c)this._firstFrame=
c;a.index=d;a=parseInt(d,10);this._totalFrame<a&&(this._totalFrame=a)}},update:function(a,b){if(this._baseFrame&&this._baseFrame.transition&&this._baseFrame.nextFrame){var b=b+1E3*(a-this._baseFrame.index)/this._fps,c=1E3*(this._baseFrame.nextFrame.index-this._baseFrame.index)/this._fps,c=t.Transition.getTransFunc(this._baseFrame.transition)(b/c),d;for(d in this._baseFrame)if(!("transition"==d||"action"==d||"index"==d||"nextFrame"==d||void 0==this._baseFrame.nextFrame[d])){var e=(this._baseFrame.nextFrame[d]-
this._baseFrame[d])*c+this._baseFrame[d];"visible"==d&&(e=this._baseFrame[d]);this._setProperty(this._target,d,e)}}},executeKeyFrame:function(a){var b=this._keyFrameObj[a];if(b){this._baseFrame=b;for(var c in b)"transition"==c||("action"==c||"index"==c||"nextFrame"==c)||this._setProperty(this._target,c,b[c]);b.action&&b.action instanceof Function&&b.action.apply(this._target);if(b.transition&&!b.nextFrame)for(;a<=this._totalFrame;)if(a++,this._keyFrameObj[a]){a=this._keyFrameObj[a];for(c in a)b[c]||
(b[c]=this._getProperty(this._target,c));b.nextFrame=a;break}}},setTotalFrames:function(a){this._totalFrame=a},getTotalFrames:function(){return this._totalFrame},setFps:function(a){this._fps=a},getTarget:function(){return this._target},getFirstFrame:function(){return this._firstFrame},_getProperty:function(a,b){b.match(/^([a-z])(.*)/);var c="get"+RegExp.$1.toUpperCase()+RegExp.$2;if(a[c])return a[c]()},_setProperty:function(a,b,c){b.match(/^([a-z])(.*)/);b="set"+RegExp.$1.toUpperCase()+RegExp.$2;
if(a[b])a[b](c)}});t.KeyFrameAnimation=l.create(r,{_fps:0,_totalFrame:0,_timelineArr:null,_timer:null,_updateFunc:null,_shouldLoop:!1,_currentFrame:1,initialize:function(a,b,c){this._fps=a;this._totalFrame=b;this._timer=new q;for(a=0;a<c.length;a++){var d=c[a];if(d.constructor!=t.Timeline)throw Error("set an instance of anim.Timeline");d.setTotalFrames(b);d.setFps(this._fps)}this._timelineArr=c?c:[]},addTimeline:function(a){this._timelineArr.push(a)},play:function(a){this.gotoAndPlay(1,a)},stop:function(){var a=
t.Animation.system;this._updateFunc&&(a.removeEventListener(i.ENTER_FRAME,this._updateFunc),this._updateFunc=null);this.dispatchEvent(i.COMPLETE)},gotoAndPlay:function(a,b){if(a>this._totalFrame)throw Error("invalid frame index");b&&(this._shouldLoop=b);this._updateFunc=s(this._update,this);this._currentFrame=a;this._executeKeyFrame(this._currentFrame);this._timer.start();t.Animation.system.addEventListener(i.ENTER_FRAME,this._updateFunc)},_update:function(){var a=this._timer.getElapsed();a>=1E3/
this._fps&&(this._step(),a=this._timer.getElapsed());for(var b=0;b<this._timelineArr.length;b++)this._timelineArr[b].update(this._currentFrame,a)},_step:function(){this._timer.reset();this._currentFrame++;this._executeKeyFrame(this._currentFrame);this._currentFrame==this._totalFrame&&(this._shouldLoop?this._currentFrame=0:this.stop())},_executeKeyFrame:function(a){for(var b=0;b<this._timelineArr.length;b++)this._timelineArr[b].executeKeyFrame(a)},getCurrentFrame:function(){return this._currentFrame},
getTotalFrame:function(){return this._totalFrame}});var C=l.create(r,function(){function a(a){a.target.onload=null;a.target.onerror=null;this._loadedImgNum++;this.dispatchEvent(i.PROGRESS);this._loadedImgNum==this._loadImgNum&&this.dispatchEvent(i.COMPLETE)}function b(a){var b,e,f;b=0;for(e=this._loadingImgArr.length;b<e;b++)f=this._loadingImgArr[b],f.onload=null,f.onerror=null;this.dispatchEvent(i.ERROR);throw Error("Load Error : "+a.target.src);}return{initialize:function(){this._loadedImgNum=this._loadImgNum=
0;this._imageHash={};this._loadingImgArr=[];this._srcArr=[]},load:function(c){this._srcArr=c;this._loadedImgNum=0;this._loadImgNum=c.length;this._loadingImgArr=[];if(0===d)this.dispatchEvent(i.COMPLETE);else{for(var c=0,d=this._srcArr.length;c<d;c++){var e=this._srcArr[c],f;e.constructor==HTMLImageElement?(f=e,f.complete?a.call(this,{target:f}):(e.onload=s(a,this),e.onerror=s(b,this))):e.constructor==String&&(f=document.createElement("img"),f.src=e,f.onload=s(a,this),f.onerror=s(b,this),this._imageHash[e]=
f);this._loadingImgArr.push(f)}this._srcArr=[]}},getImage:function(a,b){return!this._imageHash[a]?null:b&&4==b.length?new h.Image(this._imageHash[a],b):new h.Image(this._imageHash[a])},getTotal:function(){return this._loadImgNum},getLoaded:function(){return this._loadedImgNum}}}()),G=l.create(r,{_fps:60,_originFps:0,_width:0,_height:0,_canvas:null,_context:null,_disableClearRect:!1,_game:null,_gameClass:null,_gameParams:null,_intervalId:null,_stage:null,_imageManager:null,_realFps:0,_runTime:0,_runCount:0,
_prevTime:0,_fpsElem:null,_maxFps:0,_adjustCount:1,_timer:null,_canvasScale:1,_ADJUST_FPS_TIME:1E4,_ADJUST_FACTOR:2.5,initialize:function(a,b,c,d){this._width=a;this._height=b;this._canvas=document.getElementById(c);this._context=this._canvas.getContext("2d");this._stage=new h.DisplayObjectContainer;this._timer=new q;this._disableClearRect=d?!0:!1;this._canvas.width=this._width;this._canvas.height=this._height;t.Animation.system=this;x.system=this;h.Image.context=this._context;arc._system=this;this._fpsElem=
document.getElementById("fps");this._setEvent()},setFullScreen:function(){this._setViewport();o.isiOS?window.addEventListener("orientationchange",s(this._setViewport,this),!0):window.addEventListener("resize",s(this._setViewport,this),!0)},_setViewport:function(){var a=window.innerWidth;a<this._canvas.width&&(a=this._canvas.width);this._canvasScale=a/this._canvas.width;this._canvas.style.width=a+"px";this._canvas.style.height=Math.floor(this._canvas.height*this._canvasScale)+"px"},_setEvent:function(){function a(a){return{x:a.pageX/
g._canvasScale-g._canvas.offsetLeft,y:a.pageY/g._canvasScale-g._canvas.offsetTop}}function b(a,c,d){var e=a.getParent();a.dispatchEvent(c,d);e&&b(e,c,d)}function c(a,b,d){for(var e=a._displayArr,f,g,h=e.length-1;0<=h;h--)if(f=e[h],f.getVisible()&&(g=a.localToGlobal(f._screenRect[0],f._screenRect[1]),g[0]<=b&&g[0]+f._screenRect[2]>=b&&g[1]<=d&&g[1]+f._screenRect[3]>=d))if(f._displayArr){if(f=c(f,b,d))return f}else return f;return null}function d(d){function l(d,e){var f=a(d),k=c(g._stage,f.x,f.y);
(h[e]=k)&&b(k,i.TOUCH_START,{x:f.x,y:f.y})}d.preventDefault();if("mousedown"==d.type)window.addEventListener("mousemove",e,!0),window.addEventListener("mouseup",f,!0),l(d,0);else for(var p=0,o=d.changedTouches.length;p<o;p++){var k=d.changedTouches[p];l(k,k.identifier)}}function e(c){function d(c,e){var f=h[e],g=a(c);f&&b(f,i.TOUCH_MOVE,{x:g.x,y:g.y})}c.preventDefault();if("mousemove"==c.type)d(c,0);else for(var e=0,f=c.changedTouches.length;e<f;e++){var g=c.changedTouches[e];d(g,g.identifier)}}function f(c){function d(c,
e){var f=h[e],g=a(c);delete h[e];f&&b(f,i.TOUCH_END,{x:g.x,y:g.y})}c.preventDefault();if("mouseup"==c.type)window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",f,!0),d(c,0);else for(var g=0,l=c.changedTouches.length;g<l;g++){var k=c.changedTouches[g];d(k,k.identifier)}}var g=this,h={};o.isMobile?(this._canvas.addEventListener("touchstart",d,!0),this._canvas.addEventListener("touchmove",e,!0),this._canvas.addEventListener("touchend",f,!0)):this._canvas.addEventListener("mousedown",
d,!0)},load:function(a){this._imageManager||(this._imageManager=new C);this._imageManager.addEventListener(i.PROGRESS,s(this._loading,this));this._imageManager.addEventListener(i.COMPLETE,s(this._loaded,this));this._imageManager.load(a)},_loading:function(){this.dispatchEvent(i.PROGRESS,{total:this._imageManager.getTotal(),loaded:this._imageManager.getLoaded()})},_loaded:function(){this._imageManager.removeEventListener(i.PROGRESS);this._imageManager.removeEventListener(i.COMPLETE);this.dispatchEvent(i.COMPLETE);
this.start()},setGameClass:function(a,b){this._gameClass=a;this._gameParams=b},start:function(){q.tick();this._game=new this._gameClass(this._gameParams,this);this._stage.addChild(this._game);this._prevTime=q.time;this._timer.start();this._intervalId=setInterval(s(this.run,this),1E3/this._fps)},stop:function(){clearInterval(this._intervalId)},run:function(){q.tick();this._runTime+=q.time-this._prevTime;this._runCount++;if(1E3<=this._runTime&&(this._realFps=1E3*this._runCount/this._runTime,this._runCount=
this._runTime=0,this._fpsElem&&(this._fpsElem.innerHTML=this._realFps),this._realFps>this._maxFps))this._maxFps=this._realFps;this._prevTime=q.time;this._disableClearRect||this._context.clearRect(0,0,this._width,this._height);this._game.update();this._stage.draw();this.dispatchEvent(i.ENTER_FRAME)},getWidth:function(){return this._width},getHeight:function(){return this._height},getImage:function(a,b){return this._imageManager.getImage(a,b)},getCanvas:function(){return this._canvas},getStage:function(){return this._stage},
getFps:function(){return this._realFps}}),H=l.create(h.DisplayObjectContainer,{_system:null,initialize:function(a,b){this._system=b},update:function(){}});window.addEventListener("load",function(){1>=window.pageYOffset&&setTimeout(function(){scrollTo(0,1)},10)},!1);D.arc={ua:o,display:h,anim:t,util:E,Class:l,Event:i,EventDispatcher:r,Timer:q,CountTimer:x,Ajax:F,ImageManager:C,System:G,Game:H}})(window);
